<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç–Ω—ã—Ö –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; margin: 0; padding: 2em 5em; background-color: #f4f4f4; color: #333; }
        .container { max-width: 900px; margin: 0 auto; background: #fff; padding: 2em; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1, h2, h3 { color: #2c3e50; }
        pre { background-color: #eee; padding: 1em; border-radius: 5px; overflow-x: auto; }
        code { background-color: #eee; padding: 0.2em 0.4em; border-radius: 3px; }
        a { color: #3498db; }
        .badges { margin-bottom: 1em; }
        .input-section { margin-bottom: 2em; }
        .input-group { display: flex; gap: 1em; align-items: center; }
        .input-group input { flex: 1; padding: 0.5em; border: 1px solid #ddd; border-radius: 4px; }
        .input-group button { padding: 0.5em 1em; background-color: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .input-group button:hover { background-color: #2980b9; }
        .result-section { margin-top: 2em; }
        .result-card { background-color: #f9f9f9; padding: 1em; border-radius: 4px; margin-bottom: 1em; }
        .result-card h3 { margin-top: 0; }
        .error { color: #e74c3c; }
        .success { color: #27ae60; }
        .warning {background-color: #fff3cd;border-left: 4px solid #ffc107;padding: 0.5em 1em; margin: 0.5em 0;border-radius: 4px;}
    </style>
</head>
<body>

<div class="container">
    <h1>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç–Ω—ã—Ö –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π</h1>
    
    <!-- –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –±–µ–π–¥–∂–∏ –∏–∑ –≤–∞—à–µ–≥–æ README.md –≤—Ä—É—á–Ω—É—é -->
    <div class="badges">
        <img src="" alt="License: MIT">
        <img src="" alt="Python">
    </div>

    <!-- –°—é–¥–∞ –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ -->
    <p>
        –≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø–µ–ø—Ç–∏–¥–Ω—ã—Ö —Ü–µ–ø–µ–π. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–∞—Å—Å—É, —Å–æ—Å—Ç–∞–≤ –∏ –º–∞—Å—Å–æ–≤—ã–µ –¥–æ–ª–∏ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç, –∞ —Ç–∞–∫–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Ö–æ–∂–¥–µ–Ω–∏—è –æ–¥–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –¥—Ä—É–≥—É—é.
    </p>

    <!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ -->
    <div class="input-section">
        <h2>–ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
        <div class="input-group">
            <input type="text" id="sequenceInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: ROG)" maxlength="100">
            <button onclick="analyzeSequence()">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
        <p style="color: #666; font-size: 0.9em;">–ü—Ä–∏–º–µ—Ä—ã: ROG, DDD, KRR, ACE, YGGFL</p>
    </div>

    <!-- –û–±–ª–∞—Å—Ç—å –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
    <div class="result-section" id="resultSection" style="display: none;">
        <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h2>
        <div class="result-card">
            <h3>–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <p><strong>–û–±—â–∞—è –º–∞—Å—Å–∞:</strong> <span id="totalMass">0</span> –î–∞</p>
            <p><strong>–û–±—â–µ–µ —á–∏—Å–ª–æ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç:</strong> <span id="totalAmino">0</span></p>
            <p><strong>–ò–∑–æ—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è —Ç–æ—á–∫–∞ (pI):</strong> <span id="piValue">N/A</span></p>
        </div>
        <div class="result-card">
            <h3>–°–æ—Å—Ç–∞–≤</h3>
            <div id="compositionTable"></div>
        </div>
        <div class="result-card" id="errorSection" style="display: none;">
            <h3>–û—à–∏–±–∫–∏</h3>
            <div id="errorList"></div>
        </div>
            <h3>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</h3>
            <div id="warningList"></div>
        </div>
    </div>

    <h2>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h2>
    <ul>
        <li>üß¨ –†–∞—Å—á–µ—Ç –æ–±—â–µ–π –º–∞—Å—Å—ã –∏ –¥–ª–∏–Ω—ã –ø–µ–ø—Ç–∏–¥–Ω–æ–π —Ü–µ–ø–∏.</li>
        <li>üìä –ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–∞–≤–∞.</li>
        <li>üîç –ü–æ–∏—Å–∫ –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π.</li>
        <li>‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π.</li>
        <li>üéØ –†–∞—Å—á–µ—Ç –∏–∑–æ—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ (pI).</li>
    </ul>

    <h2>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</h2>
    <ol>
        <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è: <a href="https://github.com/Sarasty99/amino-acid-analyze">github.com/Sarasty99/amino-acid-analyze</a></li>
        <li>–ù–∞–∂–º–∏—Ç–µ –∑–µ–ª–µ–Ω—É—é –∫–Ω–æ–ø–∫—É "<strong>Code</strong>" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "<strong>Download ZIP</strong>".</li>
        <li>–†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤ –∏ –Ω–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª <code>amino_7.py</code>.</li>
        <li>–ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ —á–µ—Ä–µ–∑ Python.</li>
    </ol>

    <h2>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏</h2>
    <p>
        –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Python 3.10+ –∏ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è (–û–û–ü).
    </p>

    <h2>–ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è</h2>
    <ul>
        <li>[ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ (pI).</li>
        <li>[ ] –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ PDF-—Ñ–∞–π–ª.</li>
    </ul>

    <h2>–°—Å—ã–ª–∫–∏</h2>
    <p>
        –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–¥ –∏ –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–∂–Ω–æ –Ω–∞ GitHub: <a href="https://github.com/Sarasty99/amino-acid-analyze">github.com/Sarasty99/amino-acid-analyze</a>
    </p>
</div>

<!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
<script>
    // –û–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç–∞—Ö (—ç—Ç–æ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
    const aminoAcids = {
        'G': {name: '–≥–ª–∏—Ü–∏–Ω', mass: 75.067, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'},
        'V': {name: '–≤–∞–ª–∏–Ω', mass: 117.147, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'},
        'L': {name: '–ª–µ–π—Ü–∏–Ω', mass: 131.175, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'},
        'I': {name: '–∏–∑–æ–ª–µ–π—Ü–∏–Ω', mass: 131.175, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'},
        'M': {name: '–º–µ—Ç–∏–æ–Ω–∏–Ω', mass: 149.208, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'},
        'A': {name: '–∞–ª–∞–Ω–∏–Ω', mass: 89.094, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'},
        'F': {name: '—Ñ–µ–Ω–∏–ª–∞–ª–∞–Ω–∏–Ω', mass: 165.192, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'},
        'W': {name: '—Ç—Ä–∏–ø—Ç–æ—Ñ–∞–Ω', mass: 204.228, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'},
        'P': {name: '–ø—Ä–æ–ª–∏–Ω', mass: 115.132, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'},
        'S': {name: '—Å–µ—Ä–∏–Ω', mass: 105.093, radical: '–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π'},
        'T': {name: '—Ç—Ä–µ–æ–Ω–∏–Ω', mass: 119.119, radical: '–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π'},
        'C': {name: '—Ü–∏—Å—Ç–µ–∏–Ω', mass: 121.154, radical: '–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π', pka_radical: 8.30},
        'Y': {name: '—Ç–∏—Ä–æ–∑–∏–Ω', mass: 181.189, radical: '–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π', pka_radical: 10.10},
        'N': {name: '–∞—Å–ø–∞—Ä–∞–≥–∏–Ω', mass: 132.119, radical: '–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π'},
        'Q': {name: '–≥–ª—É—Ç–∞–º–∏–Ω', mass: 146.145, radical: '–ø–æ–ª—è—Ä–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π'},
        'D': {name: '–∞—Å–ø–∞—Ä–≥–∏–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞', mass: 133.103, radical: '—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π(-) –∑–∞—Ä—è–∂–µ–Ω–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π', pka_radical: 3.90},
        'E': {name: '–≥–ª—É—Ç–∞–º–∏–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞', mass: 147.130, radical: '—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π(-) –∑–∞—Ä—è–∂–µ–Ω–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π', pka_radical: 4.25},
        'K': {name: '–ª–∏–∑–∏–Ω', mass: 146.189, radical: '—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π(+) –∑–∞—Ä—è–∂–µ–Ω–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π', pka_radical: 10.53},
        'R': {name: '–∞—Ä–≥–∏–Ω–∏–Ω', mass: 174.203, radical: '—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π(+) –∑–∞—Ä—è–∂–µ–Ω–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π', pka_radical: 12.48},
        'H': {name: '–≥–∏—Å—Ç–∏–¥–∏–Ω', mass: 155.156, radical: '—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π(+) –∑–∞—Ä—è–∂–µ–Ω–Ω—ã–π —Ä–∞–¥–∏–∫–∞–ª, –≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π', pka_radical: 6.00}
    };

    function analyzeSequence() {
        const input = document.getElementById('sequenceInput').value.trim();
        const resultSection = document.getElementById('resultSection');
        const errorSection = document.getElementById('errorSection');
        const errorList = document.getElementById('errorList');
        
        if (!input) {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç.');
            return;
        }

        try {
            const result = analyzeSequenceData(input.toUpperCase());
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.getElementById('totalMass').textContent = result.total_mass.toFixed(3);
            document.getElementById('totalAmino').textContent = result.total_amino;
            document.getElementById('piValue').textContent = result.pi;
            
            if (result.warnings && result.warnings.length > 0) {
            let warningsHTML = '';
            result.warnings.forEach(warn => {
                warningsHTML += `<div class="warning">‚ö†Ô∏è ${warn}</div>`;
            });
            document.getElementById('warningList').innerHTML = warningsHTML;
            document.getElementById('warningSection').style.display = 'block';
        } else {
            document.getElementById('warningSection').style.display = 'none';
        }
            // –°–æ—Å—Ç–∞–≤
            let compositionHTML = '';
            for (const [sign, data] of Object.entries(result.composition)) {
                compositionHTML += `
                    <div>
                        <strong>${data.name} (${sign}):</strong> ${data.count} —à—Ç., ${data.mass_share_percent}% –º–∞—Å—Å—ã
                    </div>
                `;
            }
            document.getElementById('compositionTable').innerHTML = compositionHTML;
            
            // –û—à–∏–±–∫–∏
            if (result.errors && result.errors.length > 0) {
                let errorsHTML = '';
                result.errors.forEach(error => {
                    errorsHTML += `<div>${error}</div>`;
                });
                errorList.innerHTML = errorsHTML;
                errorSection.style.display = 'block';
            } else {
                errorSection.style.display = 'none';
            }
            
            resultSection.style.display = 'block';
            
        } catch (error) {
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: ' + error.message);
        }
    }

    function analyzeSequenceData(sequence) {
        const result = {};
        let totalMass = 0;
        let totalAmino = 0;
        const aminoList = [];
        const composition = {};
        const errors = [];
        const warnings = [];
        
        // –û—á–∏—Å—Ç–∫–∞ —Å—á–µ—Ç—á–∏–∫–æ–≤
        for (const amino of Object.values(aminoAcids)) {
            amino.kol = 0;
        }
        
        // –ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        for (const residue of sequence) {
        const amino = aminoAcids[residue];

        // –ï—Å–ª–∏ —Å–∏–º–≤–æ–ª –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π
        if (!amino) {
            warnings.push(`–°–∏–º–≤–æ–ª '${residue}' –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç–æ–π –∏ –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω`);
            continue; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —Å–∏–º–≤–æ–ª
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª–∏–¥–Ω–æ–π –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç—ã
            amino.kol += 1;
            totalAmino += 1;
            totalMass += amino.mass;
            aminoList.push(residue);
        }
        
        result.total_mass = totalMass;
        result.total_amino = totalAmino;
        result.aminos = aminoList;
        
        // –†–∞—Å—á–µ—Ç pI
        const pkaValues = [2.0, 9.0]; // C-–∫–æ–Ω–µ—Ü –∏ N-–∫–æ–Ω–µ—Ü
        
        for (const residue of sequence) {
            const amino = aminoAcids[residue];
            if (amino.pka_radical) {
                pkaValues.push(amino.pka_radical);
            }
        }
        
        pkaValues.sort();
        
        if (pkaValues.length < 2) {
            result.pi = 'N/A';
        } else {
            result.pi = ((pkaValues[0] + pkaValues[pkaValues.length - 1]) / 2).toFixed(3);
        }
        
        // –°–æ—Å—Ç–∞–≤
        if (totalMass > 0) {
            for (const [sign, amino] of Object.entries(aminoAcids)) {
                if (amino.kol > 0) {
                    const massShare = (amino.mass * amino.kol * 100) / totalMass;
                    composition[sign] = {
                        name: amino.name,
                        count: amino.kol,
                        mass_share_percent: massShare.toFixed(2)
                    };
                }
            }
        }
        
        result.composition = composition;
        if (errors.length > 0) {
            result.errors = errors;
        }
        
        return result;
    }
</script>

</body>
</html>