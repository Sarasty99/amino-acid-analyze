<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç–Ω—ã—Ö –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π</title>
    <style>
        :root {
            --primary-color: #d4a574;
            --secondary-color: #a8c686;
            --background-color: #f9f5f0;
            --text-color: #5e4a3a;
            --card-bg: #fefbf6;
        }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            line-height: 1.6; 
            margin: 0; 
            padding: 2em 5em; 
            background-color: var(--background-color); 
            color: var(--text-color);
        }
        
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            background: white; 
            padding: 2em; 
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
        }
        
        h1, h2, h3 { 
            color: var(--text-color); 
            margin-top: 0;
        }
        
        pre { 
            background-color: var(--card-bg); 
            padding: 1em; 
            border-radius: 10px; 
            overflow-x: auto; 
        }
        
        .badges { 
            display: flex;
            gap: 10px;
            margin-bottom: 1.5em;
        }
        
        .badge {
            background-color: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        .input-section {
            background: var(--card-bg);
            padding: 1.5em;
            border-radius: 10px;
            margin-bottom: 2em;
        }
        
        .input-group { 
            display: flex; 
            gap: 1em; 
            align-items: center; 
        }
        
        input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e0d6c7;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            transition: all 0.3s;
        }
        
        input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(212, 165, 116, 0.3);
        }
        
        button {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }
        
        button:hover {
            background-color: #c49564;
        }
        
        .result-section {
            margin-top: 2em;
            display: grid;
            gap: 1.5em;
        }
        
        .result-card {
            background: var(--card-bg);
            padding: 1.5em;
            border-radius: 10px;
            border-left: 5px solid var(--primary-color);
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5em;
        }
        
        .visualization {
            border: 2px solid #e0d6c7;
            height: 300px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            margin-top: 1em;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 1em;
            }
            
            .container {
                padding: 1em;
            }
            
            .input-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>ü¶† –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç–Ω—ã—Ö –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π</h1>
    
    <div class="badges">
        <div class="badge">Python 3.10+</div>
        <div class="badge">Tkinter GUI</div>
        <div class="badge">Matplotlib</div>
        <div class="badge">–û–û–ü</div>
    </div>

    <p>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø–µ–ø—Ç–∏–¥–Ω—ã—Ö —Ü–µ–ø–µ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 20+ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.</p>

    <div class="input-section">
        <h2>üîç –ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
        <div class="input-group">
            <input type="text" id="sequenceInput" 
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä: GVL)" 
                   maxlength="100">
            <button onclick="analyzeSequence()">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
    </div>

    <div class="result-section" id="resultSection" style="display: none;">
        <div class="grid">
            <div class="result-card">
                <h3>üìä –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
                <p><strong>–û–±—â–∞—è –º–∞—Å—Å–∞:</strong> <span id="totalMass">0</span> –î–∞</p>
                <p><strong>–ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç—ã:</strong> <span id="totalAmino">0</span> —à—Ç</p>
                <p><strong>–°—Ä–µ–¥–Ω—è—è –º–∞—Å—Å–∞:</strong> <span id="avgMass">0</span> –î–∞</p>
                <p><strong>–ò–∑–æ—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è —Ç–æ—á–∫–∞:</strong> <span id="piValue">N/A</span></p>
            </div>
            
            <div class="result-card">
                <h3>üß™ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                <p><strong>–ì–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–µ:</strong> <span id="hydrophobic">0</span></p>
                <p><strong>–ì–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ:</strong> <span id="hydrophilic">0</span></p>
                <p><strong>–ó–∞—Ä—è–∂–µ–Ω–Ω—ã–µ:</strong> <span id="charged">0</span></p>
                <p><strong>–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ:</strong> <span id="unknown">0</span></p>
            </div>
        </div>
        
        <div class="result-card">
            <h3>üìà –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç</h3>
            <div class="visualization">
                <canvas id="distributionChart"></canvas>
            </div>
        </div>
        
        <div class="grid">
            <div class="result-card">
                <h3>üì¶ –°–æ—Å—Ç–∞–≤</h3>
                <div id="compositionTable"></div>
            </div>
            
            <div class="result-card">
                <h3>‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</h3>
                <div id="warningMessages"></div>
            </div>
        </div>
    </div>

    <h2>‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h2>
    <div class="grid">
        <div class="result-card">
            <h3>üß™ –û—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑</h3>
            <ul>
                <li>–†–∞—Å—á–µ—Ç –º–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ–π –º–∞—Å—Å—ã</li>
                <li>–ò–∑–æ—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è —Ç–æ—á–∫–∞ (pI)</li>
                <li>–°–æ—Å—Ç–∞–≤ –∏ –º–∞—Å—Å–æ–≤—ã–µ –¥–æ–ª–∏</li>
            </ul>
        </div>
        
        <div class="result-card">
            <h3>üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</h3>
            <ul>
                <li>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç</li>
                <li>–ì–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</li>
                <li>–ó–∞—Ä—è–¥–æ–≤—ã–π –±–∞–ª–∞–Ω—Å</li>
            </ul>
        </div>
        
        <div class="result-card">
            <h3>‚öôÔ∏è –ü—Ä–æ—á–µ–µ</h3>
            <ul>
                <li>–ò—Å—Ç–æ—Ä–∏—è –∞–Ω–∞–ª–∏–∑–∞</li>
                <li>–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</li>
                <li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 20+ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç</li>
            </ul>
        </div>
    </div>

    <div class="result-card">
        <h2>üåê –°—Å—ã–ª–∫–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <p>GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: 
            <a href="https://github.com/Sarasty99/amino-acid-analyzer" 
               target="_blank" 
               style="color: var(--primary-color);">
                github.com/Sarasty99/amino-acid-analyzer
            </a>
        </p>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç —Å pKa –¥–ª—è pI —Ä–∞—Å—á–µ—Ç–∞
    const aminoAcids = {
        'G': {name: '–≥–ª–∏—Ü–∏–Ω', sign: 'gly', mass: 75.067, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π'},
        'V': {name: '–≤–∞–ª–∏–Ω', sign: 'val', mass: 117.147, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π'},
        'L': {name: '–ª–µ–π—Ü–∏–Ω', sign: 'leu', mass: 131.175, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π'},
        'I': {name: '–∏–∑–æ–ª–µ–π—Ü–∏–Ω', sign: 'ile', mass: 131.175, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π'},
        'M': {name: '–º–µ—Ç–∏–æ–Ω–∏–Ω', sign: 'met', mass: 149.208, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π'},
        'A': {name: '–∞–ª–∞–Ω–∏–Ω', sign: 'ala', mass: 89.094, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π'},
        'F': {name: '—Ñ–µ–Ω–∏–ª–∞–ª–∞–Ω–∏–Ω', sign: 'phe', mass: 165.192, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π'},
        'W': {name: '—Ç—Ä–∏–ø—Ç–æ—Ñ–∞–Ω', sign: 'trp', mass: 204.228, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π'},
        'P': {name: '–ø—Ä–æ–ª–∏–Ω', sign: 'pro', mass: 115.132, radical: '–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π'},
        'S': {name: '—Å–µ—Ä–∏–Ω', sign: 'ser', mass: 105.093, radical: '–ø–æ–ª—è—Ä–Ω—ã–π'},
        'T': {name: '—Ç—Ä–µ–æ–Ω–∏–Ω', sign: 'thr', mass: 119.119, radical: '–ø–æ–ª—è—Ä–Ω—ã–π'},
        'C': {name: '—Ü–∏—Å—Ç–µ–∏–Ω', sign: 'cys', mass: 121.154, radical: '–ø–æ–ª—è—Ä–Ω—ã–π', pka: 8.30},
        'Y': {name: '—Ç–∏—Ä–æ–∑–∏–Ω', sign: 'tyr', mass: 181.189, radical: '–ø–æ–ª—è—Ä–Ω—ã–π', pka: 10.10},
        'N': {name: '–∞—Å–ø–∞—Ä–∞–≥–∏–Ω', sign: 'asn', mass: 132.119, radical: '–ø–æ–ª—è—Ä–Ω—ã–π'},
        'Q': {name: '–≥–ª—É—Ç–∞–º–∏–Ω', sign: 'gln', mass: 146.145, radical: '–ø–æ–ª—è—Ä–Ω—ã–π'},
        'D': {name: '–∞—Å–ø–∞—Ä—Ç–∞—Ç', sign: 'asp', mass: 133.103, radical: '-', pka: 3.90},
        'E': {name: '–≥–ª—É—Ç–∞–º–∞—Ç', sign: 'glu', mass: 147.130, radical: '-', pka: 4.25},
        'K': {name: '–ª–∏–∑–∏–Ω', sign: 'lys', mass: 146.189, radical: '+', pka: 10.53},
        'R': {name: '–∞—Ä–≥–∏–Ω–∏–Ω', sign: 'arg', mass: 174.203, radical: '+', pka: 12.48},
        'H': {name: '–≥–∏—Å—Ç–∏–¥–∏–Ω', sign: 'his', mass: 155.156, radical: '+', pka: 6.00}
    };

    let chartInstance = null;

    function analyzeSequence() {
        const input = document.getElementById('sequenceInput').value.trim().toUpperCase();
        const resultSection = document.getElementById('resultSection');
        
        if (!input) {
            alert('–í–≤–µ–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç');
            return;
        }

        try {
            const result = analyzeSequenceData(input);
            updateUI(result);
            resultSection.style.display = 'block';
        } catch (error) {
            alert('–û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞: ' + error.message);
        }
    }

    function analyzeSequenceData(sequence) {
        let totalMass = 0;
        let aminoCount = 0;
        let hydrophobic = 0;
        let hydrophilic = 0;
        let charged = 0;
        let unknown = 0;
        let pkaValues = [2.0, 9.0];
        const composition = {};
        const warnings = [];

        for (const residue of sequence) {
            if (!aminoAcids[residue]) {
                warnings.push(`–°–∏–º–≤–æ–ª '${residue}' –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è`);
                unknown++;
                continue;
            }

            aminoCount++;
            totalMass += aminoAcids[residue].mass;
            
            // –°–æ—Å—Ç–∞–≤
            if (!composition[residue]) {
                composition[residue] = {count: 0, mass: 0};
            }
            composition[residue].count++;
            composition[residue].mass += aminoAcids[residue].mass;

            // –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
            const rad = aminoAcids[residue].radical;
            if (['–Ω–µ–ø–æ–ª—è—Ä–Ω—ã–π', '–≥–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π'].includes(rad)) hydrophobic++;
            if (['–ø–æ–ª—è—Ä–Ω—ã–π', '–≥–∏–¥—Ä–æ—Ñ–∏–ª—å–Ω—ã–π'].includes(rad)) hydrophilic++;
            if (rad === '+' || rad === '-') charged++;

            // –°–±–æ—Ä pKa
            if (aminoAcids[residue].pka) pkaValues.push(aminoAcids[residue].pka);
        }

        // –†–∞—Å—á–µ—Ç pI
        pkaValues.sort((a, b) => a - b);
        let pi = pkaValues.length >= 2 ? (pkaValues[0] + pkaValues[pkaValues.length-1]) / 2 : 'N/A';

        // –ú–∞—Å—Å–æ–≤—ã–µ –¥–æ–ª–∏
        for (const aa in composition) {
            composition[aa].percent = (composition[aa].mass / totalMass * 100).toFixed(2);
        }

        return {
            totalMass,
            aminoCount,
            avgMass: totalMass / aminoCount,
            pi: pi.toFixed(3), 
            hydrophobic,
            hydrophilic,
            charged,
            unknown,
            composition,
            warnings
        };
    }

    function updateUI(result) {
        document.getElementById('totalMass').textContent = result.totalMass.toFixed(3);
        document.getElementById('totalAmino').textContent = result.aminoCount;
        document.getElementById('avgMass').textContent = (result.totalMass / result.aminoCount).toFixed(3);
        document.getElementById('piValue').textContent = result.pi;
        document.getElementById('hydrophobic').textContent = result.hydrophobic;
        document.getElementById('hydrophilic').textContent = result.hydrophilic;
        document.getElementById('charged').textContent = result.charged;
        document.getElementById('unknown').textContent = result.unknown;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞
        let compHTML = '';
        for (const [aa, data] of Object.entries(result.composition)) {
            compHTML += `
                <div class="composition-item">
                    <strong>${aminoAcids[aa].name} (${aa}):</strong> 
                    ${data.count} —à—Ç. (${data.percent}%)
                </div>
            `;
        }
        document.getElementById('compositionTable').innerHTML = compHTML;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
        const warnHTML = result.warnings.map(w => `
            <div class="warning-message">‚ö†Ô∏è ${w}</div>
        `).join('');
        document.getElementById('warningMessages').innerHTML = warnHTML;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
        updateChart(result.composition);
    }

    function updateChart(composition) {
        const ctx = document.getElementById('distributionChart').getContext('2d');
        
        if (chartInstance) {
            chartInstance.destroy();
        }

        chartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(composition).map(aa => aminoAcids[aa].name),
                datasets: [{
                    label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ',
                    data: Object.values(composition).map(c => c.count),
                    backgroundColor: '#d4a574',
                    borderColor: '#c49564',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });
    }
</script>
</body>
</html>